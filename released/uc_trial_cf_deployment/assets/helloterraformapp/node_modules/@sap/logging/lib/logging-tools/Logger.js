'use strict';

const LoggerBase = require('./LoggerBase');
const EntryContext = require('../contexts/EntryContext');

class Logger extends LoggerBase {
  constructor(logContext, category) {
    super(logContext, category);
  }

  _outputEntry(level, args) {
    const ctx = new EntryContext(this._logContext, {
      type: 'log',
      loggingToolName: 'nodejs-logger',
      component: this._component,
      level,
      messageArgs: args,
      addStack: false
    });

    // eslint-disable-next-line no-console
    console.log(this._formatters.log.format(ctx));

    if (ctx.hasError) {
      this._logContext.getTracer('Logger.js')[level](ctx.error);
    }
  }
}

module.exports = Logger;
