'use strict';

const tracer = require('./logger').getTracer(__filename);
const prettyPrint = require('./pretty-print');

module.exports = {
  constructRegExp: function(source) {
    let regexFlag = (source.matchCase === false && 'i') || '';
    return new RegExp(source.path || source, regexFlag);
  },

  mergePluginsIntoRoutes: function(configuration, plugins) {
    configuration.routes = (plugins || []).concat(configuration.routes);
    if (tracer.isEnabled('debug')) {
      tracer.debug('After merging plugin configurations into the routes, ' +
        'following routing configuration will be used:\n' +
        JSON.stringify(configuration.routes, prettyPrint.prettyPrintRegExp, 2));
    }
  }
};
