'use strict';

module.exports = function routeResponseHeadersHandler(req, res, next) {
  let url = req.internalUrl;
  if (!url || !url.route) {
    return next();
  }
  let tracer = req.loggingContext.getTracer(__filename);
  let cacheControl = url.route.cacheControl;
  if (cacheControl){
    if (url.route.localDir || url.route.service === 'html5-apps-repo-rt') {
      res.setHeader('Cache-Control', cacheControl);
      tracer.info('[ROUTE_HEADERS] Returning cache control headers:', cacheControl);
    } else {
      tracer.warning('[ROUTE_HEADERS] Returning cache control headers for destination or service routes is not supported');
    }
  }
  next();
};

