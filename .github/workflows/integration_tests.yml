name: Integration Tests - Released

on:
  workflow_dispatch:

env:
  # Credentials used by the Terraform script
  BTP_USERNAME: ${{ secrets.BTP_USERNAME }}
  BTP_PASSWORD: ${{ secrets.BTP_PASSWORD }}
  CF_USER: ${{ secrets.BTP_USERNAME }}
  CF_PASSWORD: ${{ secrets.BTP_PASSWORD }}


jobs:
  setup_infrastructure:
    name: Run Terraform script
    runs-on: ubuntu-latest

    strategy:
      matrix:
        folder: ['released/usecases/services_apps/sap_build_apps']  
        
    steps:
      - name: Set up Git repository
        id: checkout_repo
        uses: actions/checkout@v4
      - name: Setup Terraform
        id : setup_terraform
        uses: hashicorp/setup-terraform@v2
        with:
          terraform_wrapper: false
      - name: Terraform Init
        id: terraform_init
        shell: bash
        run: |
          terraform -chdir=${{ matrix.folder }} init -no-color
      #- name: Terraform Apply
      #  id: terraform_apply
      #  shell: bash
      #  run: |
      #    terraform -chdir=${{ matrix.folder }} apply -auto-approve -no-color -var-file='sample.tfvars' -var globalaccount=${{ secrets.GLOBALACCOUNT }} -var custom_idp=${{ secrets.CUSTOM_IDP }}
     